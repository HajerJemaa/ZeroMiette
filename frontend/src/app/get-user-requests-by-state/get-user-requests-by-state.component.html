<div class="container mt-5">
  <h2 class="mb-4 text-center" style="color: #1f4d36;" >📋 Mes Demandes</h2>

  <div class="d-flex justify-content-center gap-3 mb-4">
    <button class="btn btn-outline" style="color: #1f4d36;" (click)="getUserRequestsByState('pending')">
      ⏳ En attente
    </button>
    <button class="btn btn-outline" style="color: #1f4d36;" (click)="getUserRequestsByState('accepted')">
      ✅ Acceptées
    </button>
    <button class="btn btn-outline" style="color: #1f4d36;" (click)="getUserRequestsByState('refused')">
      ❌ Refusées
    </button>
  </div>

  @if (errorMessage) {
    <div class="alert alert-warning text-center">{{ errorMessage }}</div>
  } 
  @else if (requests.length > 0) {
    <div class="row">
        @for (req of requests; track req.annCode) {
  <div class="card mt-3 p-3 border border-success-subtle shadow-sm">
    @if (selectedRequest?.annCode === req.annCode) {
      <!-- 📝 Mode édition -->
      <form (ngSubmit)="submitUpdate()">
        <div class="mb-2">
          <label class="form-label">Description :</label>
          <input [(ngModel)]="selectedRequest.description"
                 name="description"
                 class="form-control"
                 required />
        </div>
        <div class="mb-2">
          <label class="form-label">Quantité :</label>
          <input [(ngModel)]="selectedRequest.quantity"
                 name="quantity"
                 type="number"
                 class="form-control"
                 required />
        </div>
        <button type="submit" class="btn btn-success me-2">✔️ Enregistrer</button>
        <button type="button" class="btn btn-secondary" (click)="cancelUpdate()">❌ Annuler</button>
      </form>
    } @else {
      <!-- 👀 Affichage normal -->
      <p><strong>Description:</strong> {{ req.description }}</p>
      <p><strong>Quantité:</strong> {{ req.quantity }}kg</p>
      <button class="btn btn-outline-primary" (click)="editRequest(req)">✏️ Modifier</button>
    }
  </div>
}

</div>



        

        
  }@else {
    <div class="alert alert-info text-center">🛈 Choisissez un état pour afficher vos demandes.</div>
  }
</div>
