<div class="container mt-5">
  <h2 class="mb-4 text-center" style="color: #1f4d36;" >üìã Mes Demandes</h2>

  <div class="d-flex justify-content-center gap-3 mb-4">
    <button class="btn btn-outline" style="color: #1f4d36;" (click)="getUserRequestsByState('pending')">
      ‚è≥ En attente
    </button>
    <button class="btn btn-outline" style="color: #1f4d36;" (click)="getUserRequestsByState('accepted')">
      ‚úÖ Accept√©es
    </button>
    <button class="btn btn-outline" style="color: #1f4d36;" (click)="getUserRequestsByState('refused')">
      ‚ùå Refus√©es
    </button>
  </div>

  @if (errorMessage) {
    <div class="alert alert-warning text-center">{{ errorMessage }}</div>
  } 
  @else if (requests.length > 0) {
    <div class="row">
      @for (req of requests; track req.annCode) {
        <div class="card shadow-sm" style="border: 2px solid #1f4d36;">
          <div class="card-body" style="background-color: #f8f9f6;">
            
            <!-- Nom du donneur et D√©lai -->
            <div class="row" >
              <div class="col-7">
                <h5 class="card-title" style="color: #380303;">{{annonces[req.annCode].title}}</h5>
              </div>
              <div class="col-2"></div>
              <div class="col-3  text-end">
                <strong style="color: #1f4d36;">dateC:</strong>
                <span style="color: #570505;">{{req.dateC}}</span>
              </div>
            </div>

            <!-- Cat√©gorie -->
            <div class="row">
              <div class="col-6 ">
                <div class="row">
                  <div class="col">
                  <strong style="color: #1f4d36;">From:</strong>
                  <p>donor name</p>
                </div>
              </div>
  
              <!-- Description de l'annonce -->
              <div class="row">
                <div class="col">
                  <strong style="color: #1f4d36;">Description :</strong>
                  <p>{{req.description}}</p>
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <strong style="color: #1f4d36;">Quantit√© demand√©e :</strong>
                  <p>{{req.quantity}}kg</p> <!-- Affichage de la quantit√© -->
                </div>
              </div>
              @if(req.state=='pending'){
                <div class="row"><div class="col -5"></div>
                <div class="col">
                  <button class="btn btn-outline-danger" (click)="deleteRequest(req.annCode)" (click)="getUserRequestsByState('pending')">delete</button>
                </div></div>
                

              }
          </div>
        </div>
      </div>
    </div>    
        
      }
    </div>
  }@else {
    <div class="alert alert-info text-center">üõà Choisissez un √©tat pour afficher vos demandes.</div>
  }
</div>
